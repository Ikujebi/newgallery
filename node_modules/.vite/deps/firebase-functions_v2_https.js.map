{
  "version": 3,
  "sources": ["../../object-assign/index.js", "../../vary/index.js", "../../cors/lib/index.js", "browser-external:async_hooks", "../../firebase-functions/lib/common/trace.js", "../../firebase-functions/lib/logger/common.js", "../../firebase-functions/lib/logger/index.js", "../../firebase-functions/lib/params/types.js", "../../firebase-functions/lib/params/index.js", "../../firebase-functions/lib/common/encoding.js", "../../firebase-functions/lib/v2/trace.js", "../../firebase-functions/lib/common/debug.js", "../../firebase-admin/lib/app-check/app-check-api-client-internal.js", "../../firebase-admin/lib/app-check/token-generator.js", "../../firebase-admin/lib/app-check/token-verifier.js", "../../firebase-admin/lib/app-check/app-check.js", "../../firebase-admin/lib/app-check/index.js", "../../firebase-functions/lib/common/config.js", "../../firebase-functions/lib/common/app.js", "../../firebase-functions/lib/common/providers/https.js", "../../firebase-functions/lib/common/options.js", "../../firebase-functions/lib/runtime/manifest.js", "../../firebase-functions/lib/v2/options.js", "../../firebase-functions/lib/v2/providers/https.js"],
  "sourcesContent": ["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n", "/*!\n * vary\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n */\n\nmodule.exports = vary\nmodule.exports.append = append\n\n/**\n * RegExp to match field-name in RFC 7230 sec 3.2\n *\n * field-name    = token\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n */\n\nvar FIELD_NAME_REGEXP = /^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/\n\n/**\n * Append a field to a vary header.\n *\n * @param {String} header\n * @param {String|Array} field\n * @return {String}\n * @public\n */\n\nfunction append (header, field) {\n  if (typeof header !== 'string') {\n    throw new TypeError('header argument is required')\n  }\n\n  if (!field) {\n    throw new TypeError('field argument is required')\n  }\n\n  // get fields array\n  var fields = !Array.isArray(field)\n    ? parse(String(field))\n    : field\n\n  // assert on invalid field names\n  for (var j = 0; j < fields.length; j++) {\n    if (!FIELD_NAME_REGEXP.test(fields[j])) {\n      throw new TypeError('field argument contains an invalid header name')\n    }\n  }\n\n  // existing, unspecified vary\n  if (header === '*') {\n    return header\n  }\n\n  // enumerate current values\n  var val = header\n  var vals = parse(header.toLowerCase())\n\n  // unspecified vary\n  if (fields.indexOf('*') !== -1 || vals.indexOf('*') !== -1) {\n    return '*'\n  }\n\n  for (var i = 0; i < fields.length; i++) {\n    var fld = fields[i].toLowerCase()\n\n    // append value (case-preserving)\n    if (vals.indexOf(fld) === -1) {\n      vals.push(fld)\n      val = val\n        ? val + ', ' + fields[i]\n        : fields[i]\n    }\n  }\n\n  return val\n}\n\n/**\n * Parse a vary header into an array.\n *\n * @param {String} header\n * @return {Array}\n * @private\n */\n\nfunction parse (header) {\n  var end = 0\n  var list = []\n  var start = 0\n\n  // gather tokens\n  for (var i = 0, len = header.length; i < len; i++) {\n    switch (header.charCodeAt(i)) {\n      case 0x20: /*   */\n        if (start === end) {\n          start = end = i + 1\n        }\n        break\n      case 0x2c: /* , */\n        list.push(header.substring(start, end))\n        start = end = i + 1\n        break\n      default:\n        end = i + 1\n        break\n    }\n  }\n\n  // final token\n  list.push(header.substring(start, end))\n\n  return list\n}\n\n/**\n * Mark that a request is varied on a header field.\n *\n * @param {Object} res\n * @param {String|Array} field\n * @public\n */\n\nfunction vary (res, field) {\n  if (!res || !res.getHeader || !res.setHeader) {\n    // quack quack\n    throw new TypeError('res argument is required')\n  }\n\n  // get existing header\n  var val = res.getHeader('Vary') || ''\n  var header = Array.isArray(val)\n    ? val.join(', ')\n    : String(val)\n\n  // set new header\n  if ((val = append(header, field))) {\n    res.setHeader('Vary', val)\n  }\n}\n", "(function () {\n\n  'use strict';\n\n  var assign = require('object-assign');\n  var vary = require('vary');\n\n  var defaults = {\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    preflightContinue: false,\n    optionsSuccessStatus: 204\n  };\n\n  function isString(s) {\n    return typeof s === 'string' || s instanceof String;\n  }\n\n  function isOriginAllowed(origin, allowedOrigin) {\n    if (Array.isArray(allowedOrigin)) {\n      for (var i = 0; i < allowedOrigin.length; ++i) {\n        if (isOriginAllowed(origin, allowedOrigin[i])) {\n          return true;\n        }\n      }\n      return false;\n    } else if (isString(allowedOrigin)) {\n      return origin === allowedOrigin;\n    } else if (allowedOrigin instanceof RegExp) {\n      return allowedOrigin.test(origin);\n    } else {\n      return !!allowedOrigin;\n    }\n  }\n\n  function configureOrigin(options, req) {\n    var requestOrigin = req.headers.origin,\n      headers = [],\n      isAllowed;\n\n    if (!options.origin || options.origin === '*') {\n      // allow any origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: '*'\n      }]);\n    } else if (isString(options.origin)) {\n      // fixed origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: options.origin\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    } else {\n      isAllowed = isOriginAllowed(requestOrigin, options.origin);\n      // reflect origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: isAllowed ? requestOrigin : false\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureMethods(options) {\n    var methods = options.methods;\n    if (methods.join) {\n      methods = options.methods.join(','); // .methods is an array, so turn it into a string\n    }\n    return {\n      key: 'Access-Control-Allow-Methods',\n      value: methods\n    };\n  }\n\n  function configureCredentials(options) {\n    if (options.credentials === true) {\n      return {\n        key: 'Access-Control-Allow-Credentials',\n        value: 'true'\n      };\n    }\n    return null;\n  }\n\n  function configureAllowedHeaders(options, req) {\n    var allowedHeaders = options.allowedHeaders || options.headers;\n    var headers = [];\n\n    if (!allowedHeaders) {\n      allowedHeaders = req.headers['access-control-request-headers']; // .headers wasn't specified, so reflect the request headers\n      headers.push([{\n        key: 'Vary',\n        value: 'Access-Control-Request-Headers'\n      }]);\n    } else if (allowedHeaders.join) {\n      allowedHeaders = allowedHeaders.join(','); // .headers is an array, so turn it into a string\n    }\n    if (allowedHeaders && allowedHeaders.length) {\n      headers.push([{\n        key: 'Access-Control-Allow-Headers',\n        value: allowedHeaders\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureExposedHeaders(options) {\n    var headers = options.exposedHeaders;\n    if (!headers) {\n      return null;\n    } else if (headers.join) {\n      headers = headers.join(','); // .headers is an array, so turn it into a string\n    }\n    if (headers && headers.length) {\n      return {\n        key: 'Access-Control-Expose-Headers',\n        value: headers\n      };\n    }\n    return null;\n  }\n\n  function configureMaxAge(options) {\n    var maxAge = (typeof options.maxAge === 'number' || options.maxAge) && options.maxAge.toString()\n    if (maxAge && maxAge.length) {\n      return {\n        key: 'Access-Control-Max-Age',\n        value: maxAge\n      };\n    }\n    return null;\n  }\n\n  function applyHeaders(headers, res) {\n    for (var i = 0, n = headers.length; i < n; i++) {\n      var header = headers[i];\n      if (header) {\n        if (Array.isArray(header)) {\n          applyHeaders(header, res);\n        } else if (header.key === 'Vary' && header.value) {\n          vary(res, header.value);\n        } else if (header.value) {\n          res.setHeader(header.key, header.value);\n        }\n      }\n    }\n  }\n\n  function cors(options, req, res, next) {\n    var headers = [],\n      method = req.method && req.method.toUpperCase && req.method.toUpperCase();\n\n    if (method === 'OPTIONS') {\n      // preflight\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureMethods(options, req));\n      headers.push(configureAllowedHeaders(options, req));\n      headers.push(configureMaxAge(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n\n      if (options.preflightContinue) {\n        next();\n      } else {\n        // Safari (and potentially other browsers) need content-length 0,\n        //   for 204 or they just hang waiting for a body\n        res.statusCode = options.optionsSuccessStatus;\n        res.setHeader('Content-Length', '0');\n        res.end();\n      }\n    } else {\n      // actual response\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n      next();\n    }\n  }\n\n  function middlewareWrapper(o) {\n    // if options are static (either via defaults or custom options passed in), wrap in a function\n    var optionsCallback = null;\n    if (typeof o === 'function') {\n      optionsCallback = o;\n    } else {\n      optionsCallback = function (req, cb) {\n        cb(null, o);\n      };\n    }\n\n    return function corsMiddleware(req, res, next) {\n      optionsCallback(req, function (err, options) {\n        if (err) {\n          next(err);\n        } else {\n          var corsOptions = assign({}, defaults, options);\n          var originCallback = null;\n          if (corsOptions.origin && typeof corsOptions.origin === 'function') {\n            originCallback = corsOptions.origin;\n          } else if (corsOptions.origin) {\n            originCallback = function (origin, cb) {\n              cb(null, corsOptions.origin);\n            };\n          }\n\n          if (originCallback) {\n            originCallback(req.headers.origin, function (err2, origin) {\n              if (err2 || !origin) {\n                next(err2);\n              } else {\n                corsOptions.origin = origin;\n                cors(corsOptions, req, res, next);\n              }\n            });\n          } else {\n            next();\n          }\n        }\n      });\n    };\n  }\n\n  // can pass either an options hash, an options delegate, or nothing\n  module.exports = middlewareWrapper;\n\n}());\n", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"async_hooks\" has been externalized for browser compatibility. Cannot access \"async_hooks.${key}\" in client code. See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extractTraceContext = exports.traceContext = void 0;\nconst async_hooks_1 = require(\"async_hooks\");\n/* @internal */\nexports.traceContext = new async_hooks_1.AsyncLocalStorage();\n/**\n * A regex to match the Cloud Trace header.\n *   - ([A-Fa-f0-9]{32}): The trace id, a 32 character hex value. (e.g. 4bf92f3577b34da6a3ce929d0e0e4736)\n *   - ([0-9]+): The parent span id, a 64 bit integer. (e.g. 00f067aa0ba902b7)\n *   - (?:;o=([0-3])): The trace mask, 1-3 denote it should be traced.\n */\nconst CLOUD_TRACE_REGEX = new RegExp(\"^(?<traceId>[A-Fa-f0-9]{32})/\" + \"(?<parentIdInt>[0-9]+)\" + \"(?:;o=(?<traceMask>[0-3]))?$\");\nconst CLOUD_TRACE_HEADER = \"X-Cloud-Trace-Context\";\nfunction matchCloudTraceHeader(carrier) {\n    let header = carrier === null || carrier === void 0 ? void 0 : carrier[CLOUD_TRACE_HEADER];\n    if (!header) {\n        // try lowercase header\n        header = carrier === null || carrier === void 0 ? void 0 : carrier[CLOUD_TRACE_HEADER.toLowerCase()];\n    }\n    if (header && typeof header === \"string\") {\n        const matches = CLOUD_TRACE_REGEX.exec(header);\n        if (matches && matches.groups) {\n            const { traceId, parentIdInt, traceMask } = matches.groups;\n            // Convert parentId from unsigned int to hex\n            const parentId = parseInt(parentIdInt);\n            if (isNaN(parentId)) {\n                // Ignore traces with invalid parentIds\n                return;\n            }\n            const sample = !!traceMask && traceMask !== \"0\";\n            return { traceId, parentId: parentId.toString(16), sample, version: \"00\" };\n        }\n    }\n}\n/**\n * A regex to match the traceparent header.\n *   - ^([a-f0-9]{2}): The specification version (e.g. 00)\n *   - ([a-f0-9]{32}): The trace id, a 16-byte array. (e.g. 4bf92f3577b34da6a3ce929d0e0e4736)\n *   - ([a-f0-9]{16}): The parent span id, an 8-byte array. (e.g. 00f067aa0ba902b7)\n *   - ([a-f0-9]{2}: The sampled flag. (e.g. 00)\n */\nconst TRACEPARENT_REGEX = new RegExp(\"^(?<version>[a-f0-9]{2})-\" +\n    \"(?<traceId>[a-f0-9]{32})-\" +\n    \"(?<parentId>[a-f0-9]{16})-\" +\n    \"(?<flag>[a-f0-9]{2})$\");\nconst TRACEPARENT_HEADER = \"traceparent\";\nfunction matchTraceparentHeader(carrier) {\n    const header = carrier === null || carrier === void 0 ? void 0 : carrier[TRACEPARENT_HEADER];\n    if (header && typeof header === \"string\") {\n        const matches = TRACEPARENT_REGEX.exec(header);\n        if (matches && matches.groups) {\n            const { version, traceId, parentId, flag } = matches.groups;\n            const sample = flag === \"01\";\n            return { traceId, parentId, sample, version };\n        }\n    }\n}\n/**\n * Extracts trace context from given carrier object, if any.\n *\n * Supports Cloud Trace and traceparent format.\n *\n * @param carrier\n */\nfunction extractTraceContext(carrier) {\n    return matchCloudTraceHeader(carrier) || matchTraceparentHeader(carrier);\n}\nexports.extractTraceContext = extractTraceContext;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2017 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UNPATCHED_CONSOLE = exports.CONSOLE_SEVERITY = void 0;\n// Map LogSeverity types to their equivalent `console.*` method.\n/** @hidden */\nexports.CONSOLE_SEVERITY = {\n    DEBUG: \"debug\",\n    INFO: \"info\",\n    NOTICE: \"info\",\n    WARNING: \"warn\",\n    ERROR: \"error\",\n    CRITICAL: \"error\",\n    ALERT: \"error\",\n    EMERGENCY: \"error\",\n};\n// safely preserve unpatched console.* methods in case of compat require\n/** @hidden */\nexports.UNPATCHED_CONSOLE = {\n    debug: console.debug,\n    info: console.info,\n    log: console.log,\n    warn: console.warn,\n    error: console.error,\n};\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2017 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.error = exports.warn = exports.info = exports.log = exports.debug = exports.write = void 0;\nconst util_1 = require(\"util\");\nconst trace_1 = require(\"../common/trace\");\nconst common_1 = require(\"./common\");\n/** @internal */\nfunction removeCircular(obj, refs = []) {\n    if (typeof obj !== \"object\" || !obj) {\n        return obj;\n    }\n    // If the object defines its own toJSON, prefer that.\n    if (obj.toJSON) {\n        return obj.toJSON();\n    }\n    if (refs.includes(obj)) {\n        return \"[Circular]\";\n    }\n    else {\n        refs.push(obj);\n    }\n    let returnObj;\n    if (Array.isArray(obj)) {\n        returnObj = new Array(obj.length);\n    }\n    else {\n        returnObj = {};\n    }\n    for (const k in obj) {\n        if (refs.includes(obj[k])) {\n            returnObj[k] = \"[Circular]\";\n        }\n        else {\n            returnObj[k] = removeCircular(obj[k], refs);\n        }\n    }\n    return returnObj;\n}\n/**\n * Writes a `LogEntry` to `stdout`/`stderr` (depending on severity).\n * @param entry - The `LogEntry` including severity, message, and any additional structured metadata.\n * @public\n */\nfunction write(entry) {\n    common_1.UNPATCHED_CONSOLE[common_1.CONSOLE_SEVERITY[entry.severity]](JSON.stringify(removeCircular(entry)));\n}\nexports.write = write;\n/**\n * Writes a `DEBUG` severity log. If the last argument provided is a plain object,\n * it is added to the `jsonPayload` in the Cloud Logging entry.\n * @param args - Arguments, concatenated into the log message with space separators.\n * @public\n */\nfunction debug(...args) {\n    write(entryFromArgs(\"DEBUG\", args));\n}\nexports.debug = debug;\n/**\n * Writes an `INFO` severity log. If the last argument provided is a plain object,\n * it is added to the `jsonPayload` in the Cloud Logging entry.\n * @param args - Arguments, concatenated into the log message with space separators.\n * @public\n */\nfunction log(...args) {\n    write(entryFromArgs(\"INFO\", args));\n}\nexports.log = log;\n/**\n * Writes an `INFO` severity log. If the last argument provided is a plain object,\n * it is added to the `jsonPayload` in the Cloud Logging entry.\n * @param args - Arguments, concatenated into the log message with space separators.\n * @public\n */\nfunction info(...args) {\n    write(entryFromArgs(\"INFO\", args));\n}\nexports.info = info;\n/**\n * Writes a `WARNING` severity log. If the last argument provided is a plain object,\n * it is added to the `jsonPayload` in the Cloud Logging entry.\n * @param args - Arguments, concatenated into the log message with space separators.\n * @public\n */\nfunction warn(...args) {\n    write(entryFromArgs(\"WARNING\", args));\n}\nexports.warn = warn;\n/**\n * Writes an `ERROR` severity log. If the last argument provided is a plain object,\n * it is added to the `jsonPayload` in the Cloud Logging entry.\n * @param args - Arguments, concatenated into the log message with space separators.\n * @public\n */\nfunction error(...args) {\n    write(entryFromArgs(\"ERROR\", args));\n}\nexports.error = error;\n/** @hidden */\nfunction entryFromArgs(severity, args) {\n    let entry = {};\n    const lastArg = args[args.length - 1];\n    if (lastArg && typeof lastArg === \"object\" && lastArg.constructor === Object) {\n        entry = args.pop();\n    }\n    const ctx = trace_1.traceContext.getStore();\n    // mimic `console.*` behavior, see https://nodejs.org/api/console.html#console_console_log_data_args\n    let message = (0, util_1.format)(...args);\n    if (severity === \"ERROR\" && !args.find((arg) => arg instanceof Error)) {\n        message = new Error(message).stack || message;\n    }\n    const out = {\n        \"logging.googleapis.com/trace\": (ctx === null || ctx === void 0 ? void 0 : ctx.traceId)\n            ? `projects/${process.env.GCLOUD_PROJECT}/traces/${ctx.traceId}`\n            : undefined,\n        ...entry,\n        severity,\n    };\n    if (message) {\n        out.message = message;\n    }\n    return out;\n}\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ListParam = exports.BooleanParam = exports.FloatParam = exports.IntParam = exports.InternalExpression = exports.StringParam = exports.SecretParam = exports.Param = exports.CompareExpression = exports.TernaryExpression = exports.Expression = void 0;\nconst logger = require(\"../logger\");\n/*\n * A CEL expression which can be evaluated during function deployment, and\n * resolved to a value of the generic type parameter: i.e, you can pass\n * an Expression<number> as the value of an option that normally accepts numbers.\n */\nclass Expression {\n    /** Returns the Expression's runtime value, based on the CLI's resolution of params. */\n    value() {\n        if (process.env.FUNCTIONS_CONTROL_API === \"true\") {\n            logger.warn(`${this.toString()}.value() invoked during function deployment, instead of during runtime.`);\n            logger.warn(`This is usually a mistake. In configs, use Params directly without calling .value().`);\n            logger.warn(`example: { memory: memoryParam } not { memory: memoryParam.value() }`);\n        }\n        return this.runtimeValue();\n    }\n    /** @internal */\n    runtimeValue() {\n        throw new Error(\"Not implemented\");\n    }\n    /** Returns the Expression's representation as a braced CEL expression. */\n    toCEL() {\n        return `{{ ${this.toString()} }}`;\n    }\n    toJSON() {\n        return this.toString();\n    }\n}\nexports.Expression = Expression;\nfunction valueOf(arg) {\n    return arg instanceof Expression ? arg.runtimeValue() : arg;\n}\n/**\n * Returns how an entity (either an Expression or a literal value) should be represented in CEL.\n * - Expressions delegate to the .toString() method, which is used by the WireManifest\n * - Strings have to be quoted explicitly\n * - Arrays are represented as []-delimited, parsable JSON\n * - Numbers and booleans are not quoted explicitly\n */\nfunction refOf(arg) {\n    if (arg instanceof Expression) {\n        return arg.toString();\n    }\n    else if (typeof arg === \"string\") {\n        return `\"${arg}\"`;\n    }\n    else if (Array.isArray(arg)) {\n        return JSON.stringify(arg);\n    }\n    else {\n        return arg.toString();\n    }\n}\n/**\n * A CEL expression corresponding to a ternary operator, e.g {{ cond ? ifTrue : ifFalse }}\n */\nclass TernaryExpression extends Expression {\n    constructor(test, ifTrue, ifFalse) {\n        super();\n        this.test = test;\n        this.ifTrue = ifTrue;\n        this.ifFalse = ifFalse;\n        this.ifTrue = ifTrue;\n        this.ifFalse = ifFalse;\n    }\n    /** @internal */\n    runtimeValue() {\n        return this.test.runtimeValue() ? valueOf(this.ifTrue) : valueOf(this.ifFalse);\n    }\n    toString() {\n        return `${this.test} ? ${refOf(this.ifTrue)} : ${refOf(this.ifFalse)}`;\n    }\n}\nexports.TernaryExpression = TernaryExpression;\n/**\n * A CEL expression that evaluates to boolean true or false based on a comparison\n * between the value of another expression and a literal of that same type.\n */\nclass CompareExpression extends Expression {\n    constructor(cmp, lhs, rhs) {\n        super();\n        this.cmp = cmp;\n        this.lhs = lhs;\n        this.rhs = rhs;\n    }\n    /** @internal */\n    runtimeValue() {\n        const left = this.lhs.runtimeValue();\n        const right = valueOf(this.rhs);\n        switch (this.cmp) {\n            case \"==\":\n                return Array.isArray(left) ? this.arrayEquals(left, right) : left === right;\n            case \"!=\":\n                return Array.isArray(left) ? !this.arrayEquals(left, right) : left !== right;\n            case \">\":\n                return left > right;\n            case \">=\":\n                return left >= right;\n            case \"<\":\n                return left < right;\n            case \"<=\":\n                return left <= right;\n            default:\n                throw new Error(`Unknown comparator ${this.cmp}`);\n        }\n    }\n    /** @internal */\n    arrayEquals(a, b) {\n        return a.every((item) => b.includes(item)) && b.every((item) => a.includes(item));\n    }\n    toString() {\n        const rhsStr = refOf(this.rhs);\n        return `${this.lhs} ${this.cmp} ${rhsStr}`;\n    }\n    /** Returns a TernaryExpression which can resolve to one of two values, based on the resolution of this comparison. */\n    thenElse(ifTrue, ifFalse) {\n        return new TernaryExpression(this, ifTrue, ifFalse);\n    }\n}\nexports.CompareExpression = CompareExpression;\n/**\n * Represents a parametrized value that will be read from .env files if present,\n * or prompted for by the CLI if missing. Instantiate these with the defineX\n * methods exported by the firebase-functions/params namespace.\n */\nclass Param extends Expression {\n    constructor(name, options = {}) {\n        super();\n        this.name = name;\n        this.options = options;\n    }\n    /** @internal */\n    runtimeValue() {\n        throw new Error(\"Not implemented\");\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    cmp(cmp, rhs) {\n        return new CompareExpression(cmp, this, rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    equals(rhs) {\n        return this.cmp(\"==\", rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    notEquals(rhs) {\n        return this.cmp(\"!=\", rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    greaterThan(rhs) {\n        return this.cmp(\">\", rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    greaterThanOrEqualTo(rhs) {\n        return this.cmp(\">=\", rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    lessThan(rhs) {\n        return this.cmp(\"<\", rhs);\n    }\n    /** Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression. */\n    lessThanOrEqualTo(rhs) {\n        return this.cmp(\"<=\", rhs);\n    }\n    /**\n     * Returns a parametrized expression of Boolean type, based on comparing the value of this param to a literal or a different expression.\n     * @deprecated A typo. Use lessThanOrEqualTo instead.\n     */\n    lessThanorEqualTo(rhs) {\n        return this.lessThanOrEqualTo(rhs);\n    }\n    toString() {\n        return `params.${this.name}`;\n    }\n    /** @internal */\n    toSpec() {\n        const { default: paramDefault, ...otherOptions } = this.options;\n        const out = {\n            name: this.name,\n            ...otherOptions,\n            type: this.constructor.type,\n        };\n        if (paramDefault instanceof Expression) {\n            out.default = paramDefault.toCEL();\n        }\n        else if (paramDefault !== undefined) {\n            out.default = paramDefault;\n        }\n        if (out.input && \"text\" in out.input && out.input.text.validationRegex instanceof RegExp) {\n            out.input.text.validationRegex = out.input.text.validationRegex.source;\n        }\n        return out;\n    }\n}\nexports.Param = Param;\nParam.type = \"string\";\n/**\n * A parametrized string whose value is stored in Cloud Secret Manager\n * instead of the local filesystem. Supply instances of SecretParams to\n * the secrets array while defining a Function to make their values accessible\n * during execution of that Function.\n */\nclass SecretParam {\n    constructor(name) {\n        this.name = name;\n    }\n    /** @internal */\n    runtimeValue() {\n        const val = process.env[this.name];\n        if (val === undefined) {\n            logger.warn(`No value found for secret parameter \"${this.name}\". A function can only access a secret if you include the secret in the function's dependency array.`);\n        }\n        return val || \"\";\n    }\n    /** @internal */\n    toSpec() {\n        return {\n            type: \"secret\",\n            name: this.name,\n        };\n    }\n    /** Returns the secret's value at runtime. Throws an error if accessed during deployment. */\n    value() {\n        if (process.env.FUNCTIONS_CONTROL_API === \"true\") {\n            throw new Error(`Cannot access the value of secret \"${this.name}\" during function deployment. Secret values are only available at runtime.`);\n        }\n        return this.runtimeValue();\n    }\n}\nexports.SecretParam = SecretParam;\nSecretParam.type = \"secret\";\n/**\n *  A parametrized value of String type that will be read from .env files\n *  if present, or prompted for by the CLI if missing.\n */\nclass StringParam extends Param {\n    /** @internal */\n    runtimeValue() {\n        return process.env[this.name] || \"\";\n    }\n}\nexports.StringParam = StringParam;\n/**\n * A CEL expression which represents an internal Firebase variable. This class\n * cannot be instantiated by developers, but we provide several canned instances\n * of it to make available params that will never have to be defined at\n * deployment time, and can always be read from process.env.\n * @internal\n */\nclass InternalExpression extends Param {\n    constructor(name, getter) {\n        super(name);\n        this.getter = getter;\n    }\n    /** @internal */\n    runtimeValue() {\n        return this.getter(process.env) || \"\";\n    }\n    toSpec() {\n        throw new Error(\"An InternalExpression should never be marshalled for wire transmission.\");\n    }\n}\nexports.InternalExpression = InternalExpression;\n/**\n *  A parametrized value of Integer type that will be read from .env files\n *  if present, or prompted for by the CLI if missing.\n */\nclass IntParam extends Param {\n    /** @internal */\n    runtimeValue() {\n        return parseInt(process.env[this.name] || \"0\", 10) || 0;\n    }\n}\nexports.IntParam = IntParam;\nIntParam.type = \"int\";\n/**\n *  A parametrized value of Float type that will be read from .env files\n *  if present, or prompted for by the CLI if missing.\n */\nclass FloatParam extends Param {\n    /** @internal */\n    runtimeValue() {\n        return parseFloat(process.env[this.name] || \"0\") || 0;\n    }\n}\nexports.FloatParam = FloatParam;\nFloatParam.type = \"float\";\n/**\n *  A parametrized value of Boolean type that will be read from .env files\n *  if present, or prompted for by the CLI if missing.\n */\nclass BooleanParam extends Param {\n    /** @internal */\n    runtimeValue() {\n        return !!process.env[this.name] && process.env[this.name] === \"true\";\n    }\n    /** @deprecated */\n    then(ifTrue, ifFalse) {\n        return this.thenElse(ifTrue, ifFalse);\n    }\n    thenElse(ifTrue, ifFalse) {\n        return new TernaryExpression(this, ifTrue, ifFalse);\n    }\n}\nexports.BooleanParam = BooleanParam;\nBooleanParam.type = \"boolean\";\n/**\n *  A parametrized value of String[] type that will be read from .env files\n *  if present, or prompted for by the CLI if missing.\n */\nclass ListParam extends Param {\n    /** @internal */\n    runtimeValue() {\n        const val = JSON.parse(process.env[this.name]);\n        if (!Array.isArray(val) || !val.every((v) => typeof v === \"string\")) {\n            return [];\n        }\n        return val;\n    }\n    /** @hidden */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    greaterThan(rhs) {\n        throw new Error(\">/< comparison operators not supported on params of type List\");\n    }\n    /** @hidden */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    greaterThanOrEqualTo(rhs) {\n        throw new Error(\">/< comparison operators not supported on params of type List\");\n    }\n    /** @hidden */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    lessThan(rhs) {\n        throw new Error(\">/< comparison operators not supported on params of type List\");\n    }\n    /** @hidden */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    lessThanorEqualTo(rhs) {\n        throw new Error(\">/< comparison operators not supported on params of type List\");\n    }\n}\nexports.ListParam = ListParam;\nListParam.type = \"list\";\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defineList = exports.defineFloat = exports.defineInt = exports.defineBoolean = exports.defineString = exports.defineSecret = exports.storageBucket = exports.gcloudProject = exports.projectID = exports.databaseURL = exports.clearParams = exports.declaredParams = exports.Expression = void 0;\n/**\n * @hidden\n * @alpha\n */\nconst types_1 = require(\"./types\");\nObject.defineProperty(exports, \"Expression\", { enumerable: true, get: function () { return types_1.Expression; } });\nexports.declaredParams = [];\n/**\n * Use a helper to manage the list such that params are uniquely\n * registered once only but order is preserved.\n * @internal\n */\nfunction registerParam(param) {\n    for (let i = 0; i < exports.declaredParams.length; i++) {\n        if (exports.declaredParams[i].name === param.name) {\n            exports.declaredParams.splice(i, 1);\n        }\n    }\n    exports.declaredParams.push(param);\n}\n/**\n * For testing.\n * @internal\n */\nfunction clearParams() {\n    exports.declaredParams.splice(0, exports.declaredParams.length);\n}\nexports.clearParams = clearParams;\n/**\n * A builtin param that resolves to the default RTDB database URL associated\n * with the project, without prompting the deployer. Empty string if none exists.\n */\nexports.databaseURL = new types_1.InternalExpression(\"DATABASE_URL\", (env) => { var _a; return ((_a = JSON.parse(env.FIREBASE_CONFIG)) === null || _a === void 0 ? void 0 : _a.databaseURL) || \"\"; });\n/**\n * A builtin param that resolves to the Cloud project ID associated with\n * the project, without prompting the deployer.\n */\nexports.projectID = new types_1.InternalExpression(\"PROJECT_ID\", (env) => { var _a; return ((_a = JSON.parse(env.FIREBASE_CONFIG)) === null || _a === void 0 ? void 0 : _a.projectId) || \"\"; });\n/**\n * A builtin param that resolves to the Cloud project ID, without prompting\n * the deployer.\n */\nexports.gcloudProject = new types_1.InternalExpression(\"GCLOUD_PROJECT\", (env) => { var _a; return ((_a = JSON.parse(env.FIREBASE_CONFIG)) === null || _a === void 0 ? void 0 : _a.projectId) || \"\"; });\n/**\n * A builtin param that resolves to the Cloud storage bucket associated\n * with the function, without prompting the deployer. Empty string if not\n * defined.\n */\nexports.storageBucket = new types_1.InternalExpression(\"STORAGE_BUCKET\", (env) => { var _a; return ((_a = JSON.parse(env.FIREBASE_CONFIG)) === null || _a === void 0 ? void 0 : _a.storageBucket) || \"\"; });\n/**\n * Declares a secret param, that will persist values only in Cloud Secret Manager.\n * Secrets are stored interally as bytestrings. Use ParamOptions.`as` to provide type\n * hinting during parameter resolution.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `string` return type for `.value`.\n */\nfunction defineSecret(name) {\n    const param = new types_1.SecretParam(name);\n    registerParam(param);\n    return param;\n}\nexports.defineSecret = defineSecret;\n/**\n * Declare a string param.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `string` return type for `.value`.\n */\nfunction defineString(name, options = {}) {\n    const param = new types_1.StringParam(name, options);\n    registerParam(param);\n    return param;\n}\nexports.defineString = defineString;\n/**\n * Declare a boolean param.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `boolean` return type for `.value`.\n */\nfunction defineBoolean(name, options = {}) {\n    const param = new types_1.BooleanParam(name, options);\n    registerParam(param);\n    return param;\n}\nexports.defineBoolean = defineBoolean;\n/**\n * Declare an integer param.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `number` return type for `.value`.\n */\nfunction defineInt(name, options = {}) {\n    const param = new types_1.IntParam(name, options);\n    registerParam(param);\n    return param;\n}\nexports.defineInt = defineInt;\n/**\n * Declare a float param.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `number` return type for `.value`.\n *\n * @internal\n */\nfunction defineFloat(name, options = {}) {\n    const param = new types_1.FloatParam(name, options);\n    registerParam(param);\n    return param;\n}\nexports.defineFloat = defineFloat;\n/**\n * Declare a list param.\n *\n * @param name The name of the environment variable to use to load the param.\n * @param options Configuration options for the param.\n * @returns A Param with a `string[]` return type for `.value`.\n */\nfunction defineList(name, options = {}) {\n    const param = new types_1.ListParam(name, options);\n    registerParam(param);\n    return param;\n}\nexports.defineList = defineList;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertInvoker = exports.serviceAccountFromShorthand = exports.convertIfPresent = exports.copyIfPresent = exports.durationFromSeconds = void 0;\nconst params_1 = require(\"../params\");\n/** Get a google.protobuf.Duration for a number of seconds. */\nfunction durationFromSeconds(s) {\n    return `${s}s`;\n}\nexports.durationFromSeconds = durationFromSeconds;\n/**\n * Utility function to help copy fields from type A to B.\n * As a safety net, catches typos or fields that aren't named the same\n * in A and B, but cannot verify that both Src and Dest have the same type for the same field.\n */\nfunction copyIfPresent(dest, src, ...fields) {\n    if (!src) {\n        return;\n    }\n    for (const field of fields) {\n        if (!Object.prototype.hasOwnProperty.call(src, field)) {\n            continue;\n        }\n        dest[field] = src[field];\n    }\n}\nexports.copyIfPresent = copyIfPresent;\nfunction convertIfPresent(dest, src, destField, srcField, converter = (from) => {\n    return from;\n}) {\n    if (!src) {\n        return;\n    }\n    if (!Object.prototype.hasOwnProperty.call(src, srcField)) {\n        return;\n    }\n    dest[destField] = converter(src[srcField]);\n}\nexports.convertIfPresent = convertIfPresent;\nfunction serviceAccountFromShorthand(serviceAccount) {\n    if (serviceAccount === \"default\") {\n        return null;\n    }\n    else if (serviceAccount instanceof params_1.Expression) {\n        return serviceAccount;\n    }\n    else if (serviceAccount.endsWith(\"@\")) {\n        if (!process.env.GCLOUD_PROJECT) {\n            throw new Error(`Unable to determine email for service account '${serviceAccount}' because process.env.GCLOUD_PROJECT is not set.`);\n        }\n        return `${serviceAccount}${process.env.GCLOUD_PROJECT}.iam.gserviceaccount.com`;\n    }\n    else if (serviceAccount.includes(\"@\")) {\n        return serviceAccount;\n    }\n    else {\n        throw new Error(`Invalid option for serviceAccount: '${serviceAccount}'. Valid options are 'default', a service account email, or '{serviceAccountName}@'`);\n    }\n}\nexports.serviceAccountFromShorthand = serviceAccountFromShorthand;\nfunction convertInvoker(invoker) {\n    if (typeof invoker === \"string\") {\n        invoker = [invoker];\n    }\n    if (invoker.length === 0) {\n        throw new Error(\"Invalid option for invoker: Must be a non-empty array.\");\n    }\n    if (invoker.find((inv) => inv.length === 0)) {\n        throw new Error(\"Invalid option for invoker: Must be a non-empty string.\");\n    }\n    if (invoker.length > 1 && invoker.find((inv) => inv === \"public\" || inv === \"private\")) {\n        throw new Error(\"Invalid option for invoker: Cannot have 'public' or 'private' in an array of service accounts.\");\n    }\n    return invoker;\n}\nexports.convertInvoker = convertInvoker;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wrapTraceContext = void 0;\nconst trace_1 = require(\"../common/trace\");\nfunction wrapTraceContext(handler) {\n    return (...args) => {\n        let traceParent;\n        if (args.length === 1) {\n            traceParent = (0, trace_1.extractTraceContext)(args[0]);\n        }\n        else {\n            traceParent = (0, trace_1.extractTraceContext)(args[0].headers);\n        }\n        if (!traceParent) {\n            // eslint-disable-next-line prefer-spread\n            return handler.apply(null, args);\n        }\n        return trace_1.traceContext.run(traceParent, handler, ...args);\n    };\n}\nexports.wrapTraceContext = wrapTraceContext;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDebugFeatureEnabled = exports.debugFeatureValue = void 0;\n// Do NOT turn on a debug feature in production.\nconst debugMode = process.env.FIREBASE_DEBUG_MODE === \"true\";\nfunction loadDebugFeatures() {\n    if (!debugMode) {\n        return {};\n    }\n    try {\n        const obj = JSON.parse(process.env.FIREBASE_DEBUG_FEATURES);\n        if (typeof obj !== \"object\") {\n            return {};\n        }\n        return obj;\n    }\n    catch (e) {\n        return {};\n    }\n}\n/* @internal */\nfunction debugFeatureValue(feat) {\n    if (!debugMode) {\n        return;\n    }\n    return loadDebugFeatures()[feat];\n}\nexports.debugFeatureValue = debugFeatureValue;\n/* @internal */\nfunction isDebugFeatureEnabled(feat) {\n    return debugMode && !!debugFeatureValue(feat);\n}\nexports.isDebugFeatureEnabled = isDebugFeatureEnabled;\n", "/*! firebase-admin v11.10.1 */\n\"use strict\";\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FirebaseAppCheckError = exports.APP_CHECK_ERROR_CODE_MAPPING = exports.AppCheckApiClient = void 0;\nconst api_request_1 = require(\"../utils/api-request\");\nconst error_1 = require(\"../utils/error\");\nconst utils = require(\"../utils/index\");\nconst validator = require(\"../utils/validator\");\n// App Check backend constants\nconst FIREBASE_APP_CHECK_V1_API_URL_FORMAT = 'https://firebaseappcheck.googleapis.com/v1/projects/{projectId}/apps/{appId}:exchangeCustomToken';\nconst ONE_TIME_USE_TOKEN_VERIFICATION_URL_FORMAT = 'https://firebaseappcheck.googleapis.com/v1beta/projects/{projectId}:verifyAppCheckToken';\nconst FIREBASE_APP_CHECK_CONFIG_HEADERS = {\n    'X-Firebase-Client': `fire-admin-node/${utils.getSdkVersion()}`\n};\n/**\n * Class that facilitates sending requests to the Firebase App Check backend API.\n *\n * @internal\n */\nclass AppCheckApiClient {\n    constructor(app) {\n        this.app = app;\n        if (!validator.isNonNullObject(app) || !('options' in app)) {\n            throw new FirebaseAppCheckError('invalid-argument', 'First argument passed to admin.appCheck() must be a valid Firebase app instance.');\n        }\n        this.httpClient = new api_request_1.AuthorizedHttpClient(app);\n    }\n    /**\n     * Exchange a signed custom token to App Check token\n     *\n     * @param customToken - The custom token to be exchanged.\n     * @param appId - The mobile App ID.\n     * @returns A promise that fulfills with a `AppCheckToken`.\n     */\n    exchangeToken(customToken, appId) {\n        if (!validator.isNonEmptyString(appId)) {\n            throw new FirebaseAppCheckError('invalid-argument', '`appId` must be a non-empty string.');\n        }\n        if (!validator.isNonEmptyString(customToken)) {\n            throw new FirebaseAppCheckError('invalid-argument', '`customToken` must be a non-empty string.');\n        }\n        return this.getUrl(appId)\n            .then((url) => {\n            const request = {\n                method: 'POST',\n                url,\n                headers: FIREBASE_APP_CHECK_CONFIG_HEADERS,\n                data: { customToken }\n            };\n            return this.httpClient.send(request);\n        })\n            .then((resp) => {\n            return this.toAppCheckToken(resp);\n        })\n            .catch((err) => {\n            throw this.toFirebaseError(err);\n        });\n    }\n    verifyReplayProtection(token) {\n        if (!validator.isNonEmptyString(token)) {\n            throw new FirebaseAppCheckError('invalid-argument', '`token` must be a non-empty string.');\n        }\n        return this.getVerifyTokenUrl()\n            .then((url) => {\n            const request = {\n                method: 'POST',\n                url,\n                headers: FIREBASE_APP_CHECK_CONFIG_HEADERS,\n                data: { app_check_token: token }\n            };\n            return this.httpClient.send(request);\n        })\n            .then((resp) => {\n            if (typeof resp.data.alreadyConsumed !== 'undefined'\n                && !validator.isBoolean(resp.data?.alreadyConsumed)) {\n                throw new FirebaseAppCheckError('invalid-argument', '`alreadyConsumed` must be a boolean value.');\n            }\n            return resp.data.alreadyConsumed || false;\n        })\n            .catch((err) => {\n            throw this.toFirebaseError(err);\n        });\n    }\n    getUrl(appId) {\n        return this.getProjectId()\n            .then((projectId) => {\n            const urlParams = {\n                projectId,\n                appId,\n            };\n            const baseUrl = utils.formatString(FIREBASE_APP_CHECK_V1_API_URL_FORMAT, urlParams);\n            return utils.formatString(baseUrl);\n        });\n    }\n    getVerifyTokenUrl() {\n        return this.getProjectId()\n            .then((projectId) => {\n            const urlParams = {\n                projectId\n            };\n            const baseUrl = utils.formatString(ONE_TIME_USE_TOKEN_VERIFICATION_URL_FORMAT, urlParams);\n            return utils.formatString(baseUrl);\n        });\n    }\n    getProjectId() {\n        if (this.projectId) {\n            return Promise.resolve(this.projectId);\n        }\n        return utils.findProjectId(this.app)\n            .then((projectId) => {\n            if (!validator.isNonEmptyString(projectId)) {\n                throw new FirebaseAppCheckError('unknown-error', 'Failed to determine project ID. Initialize the '\n                    + 'SDK with service account credentials or set project ID as an app option. '\n                    + 'Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.');\n            }\n            this.projectId = projectId;\n            return projectId;\n        });\n    }\n    toFirebaseError(err) {\n        if (err instanceof error_1.PrefixedFirebaseError) {\n            return err;\n        }\n        const response = err.response;\n        if (!response.isJson()) {\n            return new FirebaseAppCheckError('unknown-error', `Unexpected response with status: ${response.status} and body: ${response.text}`);\n        }\n        const error = response.data.error || {};\n        let code = 'unknown-error';\n        if (error.status && error.status in exports.APP_CHECK_ERROR_CODE_MAPPING) {\n            code = exports.APP_CHECK_ERROR_CODE_MAPPING[error.status];\n        }\n        const message = error.message || `Unknown server error: ${response.text}`;\n        return new FirebaseAppCheckError(code, message);\n    }\n    /**\n     * Creates an AppCheckToken from the API response.\n     *\n     * @param resp - API response object.\n     * @returns An AppCheckToken instance.\n     */\n    toAppCheckToken(resp) {\n        const token = resp.data.token;\n        // `ttl` is a string with the suffix \"s\" preceded by the number of seconds,\n        // with nanoseconds expressed as fractional seconds.\n        const ttlMillis = this.stringToMilliseconds(resp.data.ttl);\n        return {\n            token,\n            ttlMillis\n        };\n    }\n    /**\n     * Converts a duration string with the suffix `s` to milliseconds.\n     *\n     * @param duration - The duration as a string with the suffix \"s\" preceded by the\n     * number of seconds, with fractional seconds. For example, 3 seconds with 0 nanoseconds\n     * is expressed as \"3s\", while 3 seconds and 1 nanosecond is expressed as \"3.000000001s\",\n     * and 3 seconds and 1 microsecond is expressed as \"3.000001s\".\n     *\n     * @returns The duration in milliseconds.\n     */\n    stringToMilliseconds(duration) {\n        if (!validator.isNonEmptyString(duration) || !duration.endsWith('s')) {\n            throw new FirebaseAppCheckError('invalid-argument', '`ttl` must be a valid duration string with the suffix `s`.');\n        }\n        const seconds = duration.slice(0, -1);\n        return Math.floor(Number(seconds) * 1000);\n    }\n}\nexports.AppCheckApiClient = AppCheckApiClient;\nexports.APP_CHECK_ERROR_CODE_MAPPING = {\n    ABORTED: 'aborted',\n    INVALID_ARGUMENT: 'invalid-argument',\n    INVALID_CREDENTIAL: 'invalid-credential',\n    INTERNAL: 'internal-error',\n    PERMISSION_DENIED: 'permission-denied',\n    UNAUTHENTICATED: 'unauthenticated',\n    NOT_FOUND: 'not-found',\n    UNKNOWN: 'unknown-error',\n};\n/**\n * Firebase App Check error code structure. This extends PrefixedFirebaseError.\n *\n * @param code - The error code.\n * @param message - The error message.\n * @constructor\n */\nclass FirebaseAppCheckError extends error_1.PrefixedFirebaseError {\n    constructor(code, message) {\n        super('app-check', code, message);\n        /* tslint:disable:max-line-length */\n        // Set the prototype explicitly. See the following link for more details:\n        // https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        /* tslint:enable:max-line-length */\n        this.__proto__ = FirebaseAppCheckError.prototype;\n    }\n}\nexports.FirebaseAppCheckError = FirebaseAppCheckError;\n", "/*! firebase-admin v11.10.1 */\n\"use strict\";\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.appCheckErrorFromCryptoSignerError = exports.AppCheckTokenGenerator = void 0;\nconst validator = require(\"../utils/validator\");\nconst utils_1 = require(\"../utils\");\nconst crypto_signer_1 = require(\"../utils/crypto-signer\");\nconst app_check_api_client_internal_1 = require(\"./app-check-api-client-internal\");\nconst ONE_MINUTE_IN_SECONDS = 60;\nconst ONE_MINUTE_IN_MILLIS = ONE_MINUTE_IN_SECONDS * 1000;\nconst ONE_DAY_IN_MILLIS = 24 * 60 * 60 * 1000;\n// Audience to use for Firebase App Check Custom tokens\nconst FIREBASE_APP_CHECK_AUDIENCE = 'https://firebaseappcheck.googleapis.com/google.firebase.appcheck.v1.TokenExchangeService';\n/**\n * Class for generating Firebase App Check tokens.\n *\n * @internal\n */\nclass AppCheckTokenGenerator {\n    /**\n     * The AppCheckTokenGenerator class constructor.\n     *\n     * @param signer - The CryptoSigner instance for this token generator.\n     * @constructor\n     */\n    constructor(signer) {\n        if (!validator.isNonNullObject(signer)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'INTERNAL ASSERT: Must provide a CryptoSigner to use AppCheckTokenGenerator.');\n        }\n        this.signer = signer;\n    }\n    /**\n     * Creates a new custom token that can be exchanged to an App Check token.\n     *\n     * @param appId - The Application ID to use for the generated token.\n     *\n     * @returns A Promise fulfilled with a custom token signed with a service account key\n     * that can be exchanged to an App Check token.\n     */\n    createCustomToken(appId, options) {\n        if (!validator.isNonEmptyString(appId)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', '`appId` must be a non-empty string.');\n        }\n        let customOptions = {};\n        if (typeof options !== 'undefined') {\n            customOptions = this.validateTokenOptions(options);\n        }\n        return this.signer.getAccountId().then((account) => {\n            const header = {\n                alg: this.signer.algorithm,\n                typ: 'JWT',\n            };\n            const iat = Math.floor(Date.now() / 1000);\n            const body = {\n                iss: account,\n                sub: account,\n                app_id: appId,\n                aud: FIREBASE_APP_CHECK_AUDIENCE,\n                exp: iat + (ONE_MINUTE_IN_SECONDS * 5),\n                iat,\n                ...customOptions,\n            };\n            const token = `${this.encodeSegment(header)}.${this.encodeSegment(body)}`;\n            return this.signer.sign(Buffer.from(token))\n                .then((signature) => {\n                return `${token}.${this.encodeSegment(signature)}`;\n            });\n        }).catch((err) => {\n            throw appCheckErrorFromCryptoSignerError(err);\n        });\n    }\n    encodeSegment(segment) {\n        const buffer = (segment instanceof Buffer) ? segment : Buffer.from(JSON.stringify(segment));\n        return (0, utils_1.toWebSafeBase64)(buffer).replace(/=+$/, '');\n    }\n    /**\n     * Checks if a given `AppCheckTokenOptions` object is valid. If successful, returns an object with\n     * custom properties.\n     *\n     * @param options - An options object to be validated.\n     * @returns A custom object with ttl converted to protobuf Duration string format.\n     */\n    validateTokenOptions(options) {\n        if (!validator.isNonNullObject(options)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'AppCheckTokenOptions must be a non-null object.');\n        }\n        if (typeof options.ttlMillis !== 'undefined') {\n            if (!validator.isNumber(options.ttlMillis)) {\n                throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'ttlMillis must be a duration in milliseconds.');\n            }\n            // ttlMillis must be between 30 minutes and 7 days (inclusive)\n            if (options.ttlMillis < (ONE_MINUTE_IN_MILLIS * 30) || options.ttlMillis > (ONE_DAY_IN_MILLIS * 7)) {\n                throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'ttlMillis must be a duration in milliseconds between 30 minutes and 7 days (inclusive).');\n            }\n            return { ttl: (0, utils_1.transformMillisecondsToSecondsString)(options.ttlMillis) };\n        }\n        return {};\n    }\n}\nexports.AppCheckTokenGenerator = AppCheckTokenGenerator;\n/**\n * Creates a new `FirebaseAppCheckError` by extracting the error code, message and other relevant\n * details from a `CryptoSignerError`.\n *\n * @param err - The Error to convert into a `FirebaseAppCheckError` error\n * @returns A Firebase App Check error that can be returned to the user.\n */\nfunction appCheckErrorFromCryptoSignerError(err) {\n    if (!(err instanceof crypto_signer_1.CryptoSignerError)) {\n        return err;\n    }\n    if (err.code === crypto_signer_1.CryptoSignerErrorCode.SERVER_ERROR && validator.isNonNullObject(err.cause)) {\n        const httpError = err.cause;\n        const errorResponse = httpError.response.data;\n        if (errorResponse?.error) {\n            const status = errorResponse.error.status;\n            const description = errorResponse.error.message || JSON.stringify(httpError.response);\n            let code = 'unknown-error';\n            if (status && status in app_check_api_client_internal_1.APP_CHECK_ERROR_CODE_MAPPING) {\n                code = app_check_api_client_internal_1.APP_CHECK_ERROR_CODE_MAPPING[status];\n            }\n            return new app_check_api_client_internal_1.FirebaseAppCheckError(code, `Error returned from server while signing a custom token: ${description}`);\n        }\n        return new app_check_api_client_internal_1.FirebaseAppCheckError('internal-error', 'Error returned from server: ' + JSON.stringify(errorResponse) + '.');\n    }\n    return new app_check_api_client_internal_1.FirebaseAppCheckError(mapToAppCheckErrorCode(err.code), err.message);\n}\nexports.appCheckErrorFromCryptoSignerError = appCheckErrorFromCryptoSignerError;\nfunction mapToAppCheckErrorCode(code) {\n    switch (code) {\n        case crypto_signer_1.CryptoSignerErrorCode.INVALID_CREDENTIAL:\n            return 'invalid-credential';\n        case crypto_signer_1.CryptoSignerErrorCode.INVALID_ARGUMENT:\n            return 'invalid-argument';\n        default:\n            return 'internal-error';\n    }\n}\n", "/*! firebase-admin v11.10.1 */\n\"use strict\";\n/*!\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppCheckTokenVerifier = void 0;\nconst validator = require(\"../utils/validator\");\nconst util = require(\"../utils/index\");\nconst app_check_api_client_internal_1 = require(\"./app-check-api-client-internal\");\nconst jwt_1 = require(\"../utils/jwt\");\nconst APP_CHECK_ISSUER = 'https://firebaseappcheck.googleapis.com/';\nconst JWKS_URL = 'https://firebaseappcheck.googleapis.com/v1/jwks';\n/**\n * Class for verifying Firebase App Check tokens.\n *\n * @internal\n */\nclass AppCheckTokenVerifier {\n    constructor(app) {\n        this.app = app;\n        this.signatureVerifier = jwt_1.PublicKeySignatureVerifier.withJwksUrl(JWKS_URL);\n    }\n    /**\n     * Verifies the format and signature of a Firebase App Check token.\n     *\n     * @param token - The Firebase Auth JWT token to verify.\n     * @returns A promise fulfilled with the decoded claims of the Firebase App Check token.\n     */\n    verifyToken(token) {\n        if (!validator.isString(token)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'App check token must be a non-null string.');\n        }\n        return this.ensureProjectId()\n            .then((projectId) => {\n            return this.decodeAndVerify(token, projectId);\n        })\n            .then((decoded) => {\n            const decodedAppCheckToken = decoded.payload;\n            decodedAppCheckToken.app_id = decodedAppCheckToken.sub;\n            return decodedAppCheckToken;\n        });\n    }\n    ensureProjectId() {\n        return util.findProjectId(this.app)\n            .then((projectId) => {\n            if (!validator.isNonEmptyString(projectId)) {\n                throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-credential', 'Must initialize app with a cert credential or set your Firebase project ID as the ' +\n                    'GOOGLE_CLOUD_PROJECT environment variable to verify an App Check token.');\n            }\n            return projectId;\n        });\n    }\n    decodeAndVerify(token, projectId) {\n        return this.safeDecode(token)\n            .then((decodedToken) => {\n            this.verifyContent(decodedToken, projectId);\n            return this.verifySignature(token)\n                .then(() => decodedToken);\n        });\n    }\n    safeDecode(jwtToken) {\n        return (0, jwt_1.decodeJwt)(jwtToken)\n            .catch(() => {\n            const errorMessage = 'Decoding App Check token failed. Make sure you passed ' +\n                'the entire string JWT which represents the Firebase App Check token.';\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', errorMessage);\n        });\n    }\n    /**\n     * Verifies the content of a Firebase App Check JWT.\n     *\n     * @param fullDecodedToken - The decoded JWT.\n     * @param projectId - The Firebase Project Id.\n     */\n    verifyContent(fullDecodedToken, projectId) {\n        const header = fullDecodedToken.header;\n        const payload = fullDecodedToken.payload;\n        const projectIdMatchMessage = ' Make sure the App Check token comes from the same ' +\n            'Firebase project as the service account used to authenticate this SDK.';\n        const scopedProjectId = `projects/${projectId}`;\n        let errorMessage;\n        if (header.alg !== jwt_1.ALGORITHM_RS256) {\n            errorMessage = 'The provided App Check token has incorrect algorithm. Expected \"' +\n                jwt_1.ALGORITHM_RS256 + '\" but got ' + '\"' + header.alg + '\".';\n        }\n        else if (!validator.isNonEmptyArray(payload.aud) || !payload.aud.includes(scopedProjectId)) {\n            errorMessage = 'The provided App Check token has incorrect \"aud\" (audience) claim. Expected \"' +\n                scopedProjectId + '\" but got \"' + payload.aud + '\".' + projectIdMatchMessage;\n        }\n        else if (typeof payload.iss !== 'string' || !payload.iss.startsWith(APP_CHECK_ISSUER)) {\n            errorMessage = 'The provided App Check token has incorrect \"iss\" (issuer) claim.';\n        }\n        else if (typeof payload.sub !== 'string') {\n            errorMessage = 'The provided App Check token has no \"sub\" (subject) claim.';\n        }\n        else if (payload.sub === '') {\n            errorMessage = 'The provided App Check token has an empty string \"sub\" (subject) claim.';\n        }\n        if (errorMessage) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', errorMessage);\n        }\n    }\n    verifySignature(jwtToken) {\n        return this.signatureVerifier.verify(jwtToken)\n            .catch((error) => {\n            throw this.mapJwtErrorToAppCheckError(error);\n        });\n    }\n    /**\n     * Maps JwtError to FirebaseAppCheckError\n     *\n     * @param error - JwtError to be mapped.\n     * @returns FirebaseAppCheckError instance.\n     */\n    mapJwtErrorToAppCheckError(error) {\n        if (error.code === jwt_1.JwtErrorCode.TOKEN_EXPIRED) {\n            const errorMessage = 'The provided App Check token has expired. Get a fresh App Check token' +\n                ' from your client app and try again.';\n            return new app_check_api_client_internal_1.FirebaseAppCheckError('app-check-token-expired', errorMessage);\n        }\n        else if (error.code === jwt_1.JwtErrorCode.INVALID_SIGNATURE) {\n            const errorMessage = 'The provided App Check token has invalid signature.';\n            return new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', errorMessage);\n        }\n        else if (error.code === jwt_1.JwtErrorCode.NO_MATCHING_KID) {\n            const errorMessage = 'The provided App Check token has \"kid\" claim which does not ' +\n                'correspond to a known public key. Most likely the provided App Check token ' +\n                'is expired, so get a fresh token from your client app and try again.';\n            return new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', errorMessage);\n        }\n        return new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', error.message);\n    }\n}\nexports.AppCheckTokenVerifier = AppCheckTokenVerifier;\n", "/*! firebase-admin v11.10.1 */\n\"use strict\";\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppCheck = void 0;\nconst validator = require(\"../utils/validator\");\nconst app_check_api_client_internal_1 = require(\"./app-check-api-client-internal\");\nconst token_generator_1 = require(\"./token-generator\");\nconst token_verifier_1 = require(\"./token-verifier\");\nconst crypto_signer_1 = require(\"../utils/crypto-signer\");\n/**\n * The Firebase `AppCheck` service interface.\n */\nclass AppCheck {\n    /**\n     * @param app - The app for this AppCheck service.\n     * @constructor\n     * @internal\n     */\n    constructor(app) {\n        this.app = app;\n        this.client = new app_check_api_client_internal_1.AppCheckApiClient(app);\n        try {\n            this.tokenGenerator = new token_generator_1.AppCheckTokenGenerator((0, crypto_signer_1.cryptoSignerFromApp)(app));\n        }\n        catch (err) {\n            throw (0, token_generator_1.appCheckErrorFromCryptoSignerError)(err);\n        }\n        this.appCheckTokenVerifier = new token_verifier_1.AppCheckTokenVerifier(app);\n    }\n    /**\n     * Creates a new {@link AppCheckToken} that can be sent\n     * back to a client.\n     *\n     * @param appId - The app ID to use as the JWT app_id.\n     * @param options - Optional options object when creating a new App Check Token.\n     *\n     * @returns A promise that fulfills with a `AppCheckToken`.\n     */\n    createToken(appId, options) {\n        return this.tokenGenerator.createCustomToken(appId, options)\n            .then((customToken) => {\n            return this.client.exchangeToken(customToken, appId);\n        });\n    }\n    /**\n     * Verifies a Firebase App Check token (JWT). If the token is valid, the promise is\n     * fulfilled with the token's decoded claims; otherwise, the promise is\n     * rejected.\n     *\n     * @param appCheckToken - The App Check token to verify.\n     * @param options - Optional {@link VerifyAppCheckTokenOptions} object when verifying an App Check Token.\n     *\n     * @returns A promise fulfilled with the token's decoded claims\n     *   if the App Check token is valid; otherwise, a rejected promise.\n     */\n    verifyToken(appCheckToken, options) {\n        this.validateVerifyAppCheckTokenOptions(options);\n        return this.appCheckTokenVerifier.verifyToken(appCheckToken)\n            .then((decodedToken) => {\n            if (options?.consume) {\n                return this.client.verifyReplayProtection(appCheckToken)\n                    .then((alreadyConsumed) => {\n                    return {\n                        alreadyConsumed,\n                        appId: decodedToken.app_id,\n                        token: decodedToken,\n                    };\n                });\n            }\n            return {\n                appId: decodedToken.app_id,\n                token: decodedToken,\n            };\n        });\n    }\n    validateVerifyAppCheckTokenOptions(options) {\n        if (typeof options === 'undefined') {\n            return;\n        }\n        if (!validator.isNonNullObject(options)) {\n            throw new app_check_api_client_internal_1.FirebaseAppCheckError('invalid-argument', 'VerifyAppCheckTokenOptions must be a non-null object.');\n        }\n    }\n}\nexports.AppCheck = AppCheck;\n", "/*! firebase-admin v11.10.1 */\n\"use strict\";\n/*!\n * @license\n * Copyright 2021 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAppCheck = exports.AppCheck = void 0;\n/**\n * Firebase App Check.\n *\n * @packageDocumentation\n */\nconst app_1 = require(\"../app\");\nconst app_check_1 = require(\"./app-check\");\nvar app_check_2 = require(\"./app-check\");\nObject.defineProperty(exports, \"AppCheck\", { enumerable: true, get: function () { return app_check_2.AppCheck; } });\n/**\n * Gets the {@link AppCheck} service for the default app or a given app.\n *\n * `getAppCheck()` can be called with no arguments to access the default\n * app's `AppCheck` service or as `getAppCheck(app)` to access the\n * `AppCheck` service associated with a specific app.\n *\n * @example\n * ```javascript\n * // Get the `AppCheck` service for the default app\n * const defaultAppCheck = getAppCheck();\n * ```\n *\n * @example\n * ```javascript\n * // Get the `AppCheck` service for a given app\n * const otherAppCheck = getAppCheck(otherApp);\n * ```\n *\n * @param app - Optional app for which to return the `AppCheck` service.\n *   If not provided, the default `AppCheck` service is returned.\n *\n * @returns The default `AppCheck` service if no\n *   app is provided, or the `AppCheck` service associated with the provided\n *   app.\n */\nfunction getAppCheck(app) {\n    if (typeof app === 'undefined') {\n        app = (0, app_1.getApp)();\n    }\n    const firebaseApp = app;\n    return firebaseApp.getOrInitService('appCheck', (app) => new app_check_1.AppCheck(app));\n}\nexports.getAppCheck = getAppCheck;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.firebaseConfig = exports.resetCache = void 0;\nconst fs_1 = require(\"fs\");\nconst path = require(\"path\");\nconst logger = require(\"../logger\");\nlet cache = null;\n/**\n * @internal\n * @alpha\n */\nfunction resetCache(newCache = null) {\n    cache = newCache;\n}\nexports.resetCache = resetCache;\n/**\n * Get the fields you need to initialize a Firebase app\n * @alpha\n */\nfunction firebaseConfig() {\n    if (cache) {\n        return cache;\n    }\n    let env = process.env.FIREBASE_CONFIG;\n    if (env) {\n        // Firebase Tools will always use a JSON blob in prod, but docs\n        // explicitly state that the user can set the env to a file:\n        // https://firebase.google.com/docs/admin/setup#initialize-without-parameters\n        if (!env.startsWith(\"{\")) {\n            env = (0, fs_1.readFileSync)(path.join(process.env.PWD, env)).toString(\"utf8\");\n        }\n        cache = JSON.parse(env);\n        return cache;\n    }\n    if (process.env.GCLOUD_PROJECT) {\n        logger.warn(\"Warning, estimating Firebase Config based on GCLOUD_PROJECT. Initializing firebase-admin may fail\");\n        cache = {\n            databaseURL: process.env.DATABASE_URL || `https://${process.env.GCLOUD_PROJECT}.firebaseio.com`,\n            storageBucket: process.env.STORAGE_BUCKET_URL || `${process.env.GCLOUD_PROJECT}.appspot.com`,\n            projectId: process.env.GCLOUD_PROJECT,\n        };\n        return cache;\n    }\n    else {\n        logger.warn(\"Warning, FIREBASE_CONFIG and GCLOUD_PROJECT environment variables are missing. Initializing firebase-admin will fail\");\n    }\n    return null;\n}\nexports.firebaseConfig = firebaseConfig;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2017 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setApp = exports.getApp = void 0;\nconst app_1 = require(\"firebase-admin/app\");\nconst config_1 = require(\"./config\");\nconst APP_NAME = \"__FIREBASE_FUNCTIONS_SDK__\";\nlet cache;\nfunction getApp() {\n    if (typeof cache === \"undefined\") {\n        try {\n            cache = (0, app_1.getApp)( /* default */);\n        }\n        catch {\n            // Default app does not exist. Initialize app.\n            cache = (0, app_1.initializeApp)({\n                ...(0, config_1.firebaseConfig)(),\n                credential: (0, app_1.applicationDefault)(),\n            }, APP_NAME);\n        }\n    }\n    return cache;\n}\nexports.getApp = getApp;\n/**\n * This function allows the Firebase Emulator Suite to override the FirebaseApp instance\n * used by the Firebase Functions SDK. Developers should never call this function for\n * other purposes.\n * N.B. For clarity for use in testing this name has no mention of emulation, but\n * it must be exported from index as app.setEmulatedAdminApp or we break the emulator.\n * We can remove this export when:\n * A) We complete the new emulator and no longer depend on monkeypatching\n * B) We tweak the CLI to look for different APIs to monkeypatch depending on versions.\n * @alpha\n */\nfunction setApp(app) {\n    if ((cache === null || cache === void 0 ? void 0 : cache.name) === APP_NAME) {\n        void (0, app_1.deleteApp)(cache);\n    }\n    cache = app;\n}\nexports.setApp = setApp;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.onCallHandler = exports.checkAuthToken = exports.unsafeDecodeAppCheckToken = exports.unsafeDecodeIdToken = exports.unsafeDecodeToken = exports.decode = exports.encode = exports.isValidRequest = exports.HttpsError = exports.ORIGINAL_AUTH_HEADER = exports.CALLABLE_AUTH_HEADER = void 0;\nconst cors = require(\"cors\");\nconst logger = require(\"../../logger\");\n// TODO(inlined): Decide whether we want to un-version apps or whether we want a\n// different strategy\nconst app_check_1 = require(\"firebase-admin/app-check\");\nconst auth_1 = require(\"firebase-admin/auth\");\nconst app_1 = require(\"../app\");\nconst debug_1 = require(\"../debug\");\nconst JWT_REGEX = /^[a-zA-Z0-9\\-_=]+?\\.[a-zA-Z0-9\\-_=]+?\\.([a-zA-Z0-9\\-_=]+)?$/;\n/** @internal */\nexports.CALLABLE_AUTH_HEADER = \"x-callable-context-auth\";\n/** @internal */\nexports.ORIGINAL_AUTH_HEADER = \"x-original-auth\";\n/**\n * Standard error codes and HTTP statuses for different ways a request can fail,\n * as defined by:\n * https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto\n *\n * This map is used primarily to convert from a client error code string to\n * to the HTTP format error code string and status, and make sure it's in the\n * supported set.\n */\nconst errorCodeMap = {\n    ok: { canonicalName: \"OK\", status: 200 },\n    cancelled: { canonicalName: \"CANCELLED\", status: 499 },\n    unknown: { canonicalName: \"UNKNOWN\", status: 500 },\n    \"invalid-argument\": { canonicalName: \"INVALID_ARGUMENT\", status: 400 },\n    \"deadline-exceeded\": { canonicalName: \"DEADLINE_EXCEEDED\", status: 504 },\n    \"not-found\": { canonicalName: \"NOT_FOUND\", status: 404 },\n    \"already-exists\": { canonicalName: \"ALREADY_EXISTS\", status: 409 },\n    \"permission-denied\": { canonicalName: \"PERMISSION_DENIED\", status: 403 },\n    unauthenticated: { canonicalName: \"UNAUTHENTICATED\", status: 401 },\n    \"resource-exhausted\": { canonicalName: \"RESOURCE_EXHAUSTED\", status: 429 },\n    \"failed-precondition\": { canonicalName: \"FAILED_PRECONDITION\", status: 400 },\n    aborted: { canonicalName: \"ABORTED\", status: 409 },\n    \"out-of-range\": { canonicalName: \"OUT_OF_RANGE\", status: 400 },\n    unimplemented: { canonicalName: \"UNIMPLEMENTED\", status: 501 },\n    internal: { canonicalName: \"INTERNAL\", status: 500 },\n    unavailable: { canonicalName: \"UNAVAILABLE\", status: 503 },\n    \"data-loss\": { canonicalName: \"DATA_LOSS\", status: 500 },\n};\n/**\n * An explicit error that can be thrown from a handler to send an error to the\n * client that called the function.\n */\nclass HttpsError extends Error {\n    constructor(code, message, details) {\n        super(message);\n        // A sanity check for non-TypeScript consumers.\n        if (code in errorCodeMap === false) {\n            throw new Error(`Unknown error code: ${code}.`);\n        }\n        this.code = code;\n        this.details = details;\n        this.httpErrorCode = errorCodeMap[code];\n    }\n    /**\n     * Returns a JSON-serializable representation of this object.\n     */\n    toJSON() {\n        const { details, httpErrorCode: { canonicalName: status }, message, } = this;\n        return {\n            ...(details === undefined ? {} : { details }),\n            message,\n            status,\n        };\n    }\n}\nexports.HttpsError = HttpsError;\n/** @hidden */\n// Returns true if req is a properly formatted callable request.\nfunction isValidRequest(req) {\n    // The body must not be empty.\n    if (!req.body) {\n        logger.warn(\"Request is missing body.\");\n        return false;\n    }\n    // Make sure it's a POST.\n    if (req.method !== \"POST\") {\n        logger.warn(\"Request has invalid method.\", req.method);\n        return false;\n    }\n    // Check that the Content-Type is JSON.\n    let contentType = (req.header(\"Content-Type\") || \"\").toLowerCase();\n    // If it has a charset, just ignore it for now.\n    const semiColon = contentType.indexOf(\";\");\n    if (semiColon >= 0) {\n        contentType = contentType.slice(0, semiColon).trim();\n    }\n    if (contentType !== \"application/json\") {\n        logger.warn(\"Request has incorrect Content-Type.\", contentType);\n        return false;\n    }\n    // The body must have data.\n    if (typeof req.body.data === \"undefined\") {\n        logger.warn(\"Request body is missing data.\", req.body);\n        return false;\n    }\n    // TODO(klimt): Allow only specific http headers.\n    // Verify that the body does not have any extra fields.\n    const extraKeys = Object.keys(req.body).filter((field) => field !== \"data\");\n    if (extraKeys.length !== 0) {\n        logger.warn(\"Request body has extra fields: \", extraKeys.join(\", \"));\n        return false;\n    }\n    return true;\n}\nexports.isValidRequest = isValidRequest;\n/** @hidden */\nconst LONG_TYPE = \"type.googleapis.com/google.protobuf.Int64Value\";\n/** @hidden */\nconst UNSIGNED_LONG_TYPE = \"type.googleapis.com/google.protobuf.UInt64Value\";\n/**\n * Encodes arbitrary data in our special format for JSON.\n * This is exposed only for testing.\n */\n/** @hidden */\nfunction encode(data) {\n    if (data === null || typeof data === \"undefined\") {\n        return null;\n    }\n    if (data instanceof Number) {\n        data = data.valueOf();\n    }\n    if (Number.isFinite(data)) {\n        // Any number in JS is safe to put directly in JSON and parse as a double\n        // without any loss of precision.\n        return data;\n    }\n    if (typeof data === \"boolean\") {\n        return data;\n    }\n    if (typeof data === \"string\") {\n        return data;\n    }\n    if (Array.isArray(data)) {\n        return data.map(encode);\n    }\n    if (typeof data === \"object\" || typeof data === \"function\") {\n        // Sadly we don't have Object.fromEntries in Node 10, so we can't use a single\n        // list comprehension\n        const obj = {};\n        for (const [k, v] of Object.entries(data)) {\n            obj[k] = encode(v);\n        }\n        return obj;\n    }\n    // If we got this far, the data is not encodable.\n    logger.error(\"Data cannot be encoded in JSON.\", data);\n    throw new Error(`Data cannot be encoded in JSON: ${data}`);\n}\nexports.encode = encode;\n/**\n * Decodes our special format for JSON into native types.\n * This is exposed only for testing.\n */\n/** @hidden */\nfunction decode(data) {\n    if (data === null) {\n        return data;\n    }\n    if (data[\"@type\"]) {\n        switch (data[\"@type\"]) {\n            case LONG_TYPE:\n            // Fall through and handle this the same as unsigned.\n            case UNSIGNED_LONG_TYPE: {\n                // Technically, this could work return a valid number for malformed\n                // data if there was a number followed by garbage. But it's just not\n                // worth all the extra code to detect that case.\n                const value = parseFloat(data.value);\n                if (isNaN(value)) {\n                    logger.error(\"Data cannot be decoded from JSON.\", data);\n                    throw new Error(`Data cannot be decoded from JSON: ${data}`);\n                }\n                return value;\n            }\n            default: {\n                logger.error(\"Data cannot be decoded from JSON.\", data);\n                throw new Error(`Data cannot be decoded from JSON: ${data}`);\n            }\n        }\n    }\n    if (Array.isArray(data)) {\n        return data.map(decode);\n    }\n    if (typeof data === \"object\") {\n        const obj = {};\n        for (const [k, v] of Object.entries(data)) {\n            obj[k] = decode(v);\n        }\n        return obj;\n    }\n    // Anything else is safe to return.\n    return data;\n}\nexports.decode = decode;\n/** @internal */\nfunction unsafeDecodeToken(token) {\n    if (!JWT_REGEX.test(token)) {\n        return {};\n    }\n    const components = token.split(\".\").map((s) => Buffer.from(s, \"base64\").toString());\n    let payload = components[1];\n    if (typeof payload === \"string\") {\n        try {\n            const obj = JSON.parse(payload);\n            if (typeof obj === \"object\") {\n                payload = obj;\n            }\n        }\n        catch (e) {\n            // ignore error\n        }\n    }\n    return payload;\n}\nexports.unsafeDecodeToken = unsafeDecodeToken;\n/**\n * Decode, but not verify, a Auth ID token.\n *\n * Do not use in production. Token should always be verified using the Admin SDK.\n *\n * This is exposed only for testing.\n */\n/** @internal */\nfunction unsafeDecodeIdToken(token) {\n    const decoded = unsafeDecodeToken(token);\n    decoded.uid = decoded.sub;\n    return decoded;\n}\nexports.unsafeDecodeIdToken = unsafeDecodeIdToken;\n/**\n * Decode, but not verify, an App Check token.\n *\n * Do not use in production. Token should always be verified using the Admin SDK.\n *\n * This is exposed only for testing.\n */\n/** @internal */\nfunction unsafeDecodeAppCheckToken(token) {\n    const decoded = unsafeDecodeToken(token);\n    decoded.app_id = decoded.sub;\n    return decoded;\n}\nexports.unsafeDecodeAppCheckToken = unsafeDecodeAppCheckToken;\n/**\n * Check and verify tokens included in the requests. Once verified, tokens\n * are injected into the callable context.\n *\n * @param {Request} req - Request sent to the Callable function.\n * @param {CallableContext} ctx - Context to be sent to callable function handler.\n * @returns {CallableTokenStatus} Status of the token verifications.\n */\n/** @internal */\nasync function checkTokens(req, ctx, options) {\n    const verifications = {\n        app: \"INVALID\",\n        auth: \"INVALID\",\n    };\n    await Promise.all([\n        Promise.resolve().then(async () => {\n            verifications.auth = await checkAuthToken(req, ctx);\n        }),\n        Promise.resolve().then(async () => {\n            verifications.app = await checkAppCheckToken(req, ctx, options);\n        }),\n    ]);\n    const logPayload = {\n        verifications,\n        \"logging.googleapis.com/labels\": {\n            \"firebase-log-type\": \"callable-request-verification\",\n        },\n    };\n    const errs = [];\n    if (verifications.app === \"INVALID\") {\n        errs.push(\"AppCheck token was rejected.\");\n    }\n    if (verifications.auth === \"INVALID\") {\n        errs.push(\"Auth token was rejected.\");\n    }\n    if (errs.length === 0) {\n        logger.debug(\"Callable request verification passed\", logPayload);\n    }\n    else {\n        logger.warn(`Callable request verification failed: ${errs.join(\" \")}`, logPayload);\n    }\n    return verifications;\n}\n/** @interanl */\nasync function checkAuthToken(req, ctx) {\n    const authorization = req.header(\"Authorization\");\n    if (!authorization) {\n        return \"MISSING\";\n    }\n    const match = authorization.match(/^Bearer (.*)$/i);\n    if (!match) {\n        return \"INVALID\";\n    }\n    const idToken = match[1];\n    try {\n        let authToken;\n        if ((0, debug_1.isDebugFeatureEnabled)(\"skipTokenVerification\")) {\n            authToken = unsafeDecodeIdToken(idToken);\n        }\n        else {\n            authToken = await (0, auth_1.getAuth)((0, app_1.getApp)()).verifyIdToken(idToken);\n        }\n        ctx.auth = {\n            uid: authToken.uid,\n            token: authToken,\n        };\n        return \"VALID\";\n    }\n    catch (err) {\n        logger.warn(\"Failed to validate auth token.\", err);\n        return \"INVALID\";\n    }\n}\nexports.checkAuthToken = checkAuthToken;\n/** @internal */\nasync function checkAppCheckToken(req, ctx, options) {\n    var _a;\n    const appCheckToken = req.header(\"X-Firebase-AppCheck\");\n    if (!appCheckToken) {\n        return \"MISSING\";\n    }\n    try {\n        let appCheckData;\n        if ((0, debug_1.isDebugFeatureEnabled)(\"skipTokenVerification\")) {\n            const decodedToken = unsafeDecodeAppCheckToken(appCheckToken);\n            appCheckData = { appId: decodedToken.app_id, token: decodedToken };\n            if (options.consumeAppCheckToken) {\n                appCheckData.alreadyConsumed = false;\n            }\n        }\n        else {\n            const appCheck = (0, app_check_1.getAppCheck)((0, app_1.getApp)());\n            if (options.consumeAppCheckToken) {\n                if (((_a = appCheck.verifyToken) === null || _a === void 0 ? void 0 : _a.length) === 1) {\n                    const errorMsg = \"Unsupported version of the Admin SDK.\" +\n                        \" App Check token will not be consumed.\" +\n                        \" Please upgrade the firebase-admin to the latest version.\";\n                    logger.error(errorMsg);\n                    throw new HttpsError(\"internal\", \"Internal Error\");\n                }\n                appCheckData = await (0, app_check_1.getAppCheck)((0, app_1.getApp)()).verifyToken(appCheckToken, { consume: true });\n            }\n            else {\n                appCheckData = await (0, app_check_1.getAppCheck)((0, app_1.getApp)()).verifyToken(appCheckToken);\n            }\n        }\n        ctx.app = appCheckData;\n        return \"VALID\";\n    }\n    catch (err) {\n        logger.warn(\"Failed to validate AppCheck token.\", err);\n        if (err instanceof HttpsError) {\n            throw err;\n        }\n        return \"INVALID\";\n    }\n}\n/** @internal */\nfunction onCallHandler(options, handler) {\n    const wrapped = wrapOnCallHandler(options, handler);\n    return (req, res) => {\n        return new Promise((resolve) => {\n            res.on(\"finish\", resolve);\n            cors(options.cors)(req, res, () => {\n                resolve(wrapped(req, res));\n            });\n        });\n    };\n}\nexports.onCallHandler = onCallHandler;\n/** @internal */\nfunction wrapOnCallHandler(options, handler) {\n    return async (req, res) => {\n        try {\n            if (!isValidRequest(req)) {\n                logger.error(\"Invalid request, unable to process.\");\n                throw new HttpsError(\"invalid-argument\", \"Bad Request\");\n            }\n            const context = { rawRequest: req };\n            // TODO(colerogers): yank this when we release a breaking change of the CLI that removes\n            // our monkey-patching code referenced below and increases the minimum supported SDK version.\n            //\n            // Note: This code is needed to fix v1 callable functions in the emulator with a monorepo setup.\n            // The original monkey-patched code lived in the functionsEmulatorRuntime\n            // (link: https://github.com/firebase/firebase-tools/blob/accea7abda3cc9fa6bb91368e4895faf95281c60/src/emulator/functionsEmulatorRuntime.ts#L480)\n            // and was not compatible with how monorepos separate out packages (see https://github.com/firebase/firebase-tools/issues/5210).\n            if ((0, debug_1.isDebugFeatureEnabled)(\"skipTokenVerification\") && handler.length === 2) {\n                const authContext = context.rawRequest.header(exports.CALLABLE_AUTH_HEADER);\n                if (authContext) {\n                    logger.debug(\"Callable functions auth override\", {\n                        key: exports.CALLABLE_AUTH_HEADER,\n                        value: authContext,\n                    });\n                    context.auth = JSON.parse(decodeURIComponent(authContext));\n                    delete context.rawRequest.headers[exports.CALLABLE_AUTH_HEADER];\n                }\n                const originalAuth = context.rawRequest.header(exports.ORIGINAL_AUTH_HEADER);\n                if (originalAuth) {\n                    context.rawRequest.headers[\"authorization\"] = originalAuth;\n                    delete context.rawRequest.headers[exports.ORIGINAL_AUTH_HEADER];\n                }\n            }\n            const tokenStatus = await checkTokens(req, context, options);\n            if (tokenStatus.auth === \"INVALID\") {\n                throw new HttpsError(\"unauthenticated\", \"Unauthenticated\");\n            }\n            if (tokenStatus.app === \"INVALID\") {\n                if (options.enforceAppCheck) {\n                    throw new HttpsError(\"unauthenticated\", \"Unauthenticated\");\n                }\n                else {\n                    logger.warn(\"Allowing request with invalid AppCheck token because enforcement is disabled\");\n                }\n            }\n            if (tokenStatus.app === \"MISSING\" && options.enforceAppCheck) {\n                throw new HttpsError(\"unauthenticated\", \"Unauthenticated\");\n            }\n            const instanceId = req.header(\"Firebase-Instance-ID-Token\");\n            if (instanceId) {\n                // Validating the token requires an http request, so we don't do it.\n                // If the user wants to use it for something, it will be validated then.\n                // Currently, the only real use case for this token is for sending\n                // pushes with FCM. In that case, the FCM APIs will validate the token.\n                context.instanceIdToken = req.header(\"Firebase-Instance-ID-Token\");\n            }\n            const data = decode(req.body.data);\n            let result;\n            if (handler.length === 2) {\n                result = await handler(data, context);\n            }\n            else {\n                const arg = {\n                    ...context,\n                    data,\n                };\n                // For some reason the type system isn't picking up that the handler\n                // is a one argument function.\n                result = await handler(arg);\n            }\n            // Encode the result as JSON to preserve types like Dates.\n            result = encode(result);\n            // If there was some result, encode it in the body.\n            const responseBody = { result };\n            res.status(200).send(responseBody);\n        }\n        catch (err) {\n            let httpErr = err;\n            if (!(err instanceof HttpsError)) {\n                // This doesn't count as an 'explicit' error.\n                logger.error(\"Unhandled error\", err);\n                httpErr = new HttpsError(\"internal\", \"INTERNAL\");\n            }\n            const { status } = httpErr.httpErrorCode;\n            const body = { error: httpErr.toJSON() };\n            res.status(status).send(body);\n        }\n    };\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RESET_VALUE = exports.ResetValue = void 0;\n// The MIT License (MIT)\n//\n// Copyright (c) 2022 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n/**\n * Special configuration type to reset configuration to platform default.\n *\n * @alpha\n */\nclass ResetValue {\n    toJSON() {\n        return null;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    constructor() { }\n    static getInstance() {\n        return new ResetValue();\n    }\n}\nexports.ResetValue = ResetValue;\n/**\n * Special configuration value to reset configuration to platform default.\n */\nexports.RESET_VALUE = ResetValue.getInstance();\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.initV2ScheduleTrigger = exports.initV1ScheduleTrigger = exports.initTaskQueueTrigger = exports.initV2Endpoint = exports.initV1Endpoint = exports.stackToWire = void 0;\nconst options_1 = require(\"../common/options\");\nconst params_1 = require(\"../params\");\n/**\n * Returns the JSON representation of a ManifestStack, which has CEL\n * expressions in its options as object types, with its expressions\n * transformed into the actual CEL strings.\n *\n * @alpha\n */\nfunction stackToWire(stack) {\n    const wireStack = stack;\n    const traverse = function traverse(obj) {\n        for (const [key, val] of Object.entries(obj)) {\n            if (val instanceof params_1.Expression) {\n                obj[key] = val.toCEL();\n            }\n            else if (val instanceof options_1.ResetValue) {\n                obj[key] = val.toJSON();\n            }\n            else if (typeof val === \"object\" && val !== null) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                traverse(val);\n            }\n        }\n    };\n    traverse(wireStack.endpoints);\n    return wireStack;\n}\nexports.stackToWire = stackToWire;\nconst RESETTABLE_OPTIONS = {\n    availableMemoryMb: null,\n    timeoutSeconds: null,\n    minInstances: null,\n    maxInstances: null,\n    ingressSettings: null,\n    concurrency: null,\n    serviceAccountEmail: null,\n    vpc: null,\n};\nfunction initEndpoint(resetOptions, ...opts) {\n    const endpoint = {};\n    if (opts.every((opt) => !(opt === null || opt === void 0 ? void 0 : opt.preserveExternalChanges))) {\n        for (const key of Object.keys(resetOptions)) {\n            endpoint[key] = options_1.RESET_VALUE;\n        }\n    }\n    return endpoint;\n}\n/**\n * @internal\n */\nfunction initV1Endpoint(...opts) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { concurrency, ...resetOpts } = RESETTABLE_OPTIONS;\n    return initEndpoint({ ...resetOpts }, ...opts);\n}\nexports.initV1Endpoint = initV1Endpoint;\n/**\n * @internal\n */\nfunction initV2Endpoint(...opts) {\n    return initEndpoint(RESETTABLE_OPTIONS, ...opts);\n}\nexports.initV2Endpoint = initV2Endpoint;\nconst RESETTABLE_RETRY_CONFIG_OPTIONS = {\n    maxAttempts: null,\n    maxDoublings: null,\n    maxBackoffSeconds: null,\n    maxRetrySeconds: null,\n    minBackoffSeconds: null,\n};\nconst RESETTABLE_RATE_LIMITS_OPTIONS = {\n    maxConcurrentDispatches: null,\n    maxDispatchesPerSecond: null,\n};\n/**\n * @internal\n */\nfunction initTaskQueueTrigger(...opts) {\n    const taskQueueTrigger = {\n        retryConfig: {},\n        rateLimits: {},\n    };\n    if (opts.every((opt) => !(opt === null || opt === void 0 ? void 0 : opt.preserveExternalChanges))) {\n        for (const key of Object.keys(RESETTABLE_RETRY_CONFIG_OPTIONS)) {\n            taskQueueTrigger.retryConfig[key] = options_1.RESET_VALUE;\n        }\n        for (const key of Object.keys(RESETTABLE_RATE_LIMITS_OPTIONS)) {\n            taskQueueTrigger.rateLimits[key] = options_1.RESET_VALUE;\n        }\n    }\n    return taskQueueTrigger;\n}\nexports.initTaskQueueTrigger = initTaskQueueTrigger;\nconst RESETTABLE_V1_SCHEDULE_OPTIONS = {\n    retryCount: null,\n    maxDoublings: null,\n    maxRetryDuration: null,\n    maxBackoffDuration: null,\n    minBackoffDuration: null,\n};\nconst RESETTABLE_V2_SCHEDULE_OPTIONS = {\n    retryCount: null,\n    maxDoublings: null,\n    maxRetrySeconds: null,\n    minBackoffSeconds: null,\n    maxBackoffSeconds: null,\n};\nfunction initScheduleTrigger(resetOptions, schedule, ...opts) {\n    let scheduleTrigger = {\n        schedule,\n        retryConfig: {},\n    };\n    if (opts.every((opt) => !(opt === null || opt === void 0 ? void 0 : opt.preserveExternalChanges))) {\n        for (const key of Object.keys(resetOptions)) {\n            scheduleTrigger.retryConfig[key] = options_1.RESET_VALUE;\n        }\n        scheduleTrigger = { ...scheduleTrigger, timeZone: options_1.RESET_VALUE };\n    }\n    return scheduleTrigger;\n}\n/**\n * @internal\n */\nfunction initV1ScheduleTrigger(schedule, ...opts) {\n    return initScheduleTrigger(RESETTABLE_V1_SCHEDULE_OPTIONS, schedule, ...opts);\n}\nexports.initV1ScheduleTrigger = initV1ScheduleTrigger;\n/**\n * @internal\n */\nfunction initV2ScheduleTrigger(schedule, ...opts) {\n    return initScheduleTrigger(RESETTABLE_V2_SCHEDULE_OPTIONS, schedule, ...opts);\n}\nexports.initV2ScheduleTrigger = initV2ScheduleTrigger;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.__getSpec = exports.optionsToEndpoint = exports.optionsToTriggerAnnotations = exports.getGlobalOptions = exports.setGlobalOptions = exports.RESET_VALUE = void 0;\n/**\n * Options to configure cloud functions.\n * @packageDocumentation\n */\nconst encoding_1 = require(\"../common/encoding\");\nconst options_1 = require(\"../common/options\");\nconst params_1 = require(\"../params\");\nconst types_1 = require(\"../params/types\");\nconst logger = require(\"../logger\");\nvar options_2 = require(\"../common/options\");\nObject.defineProperty(exports, \"RESET_VALUE\", { enumerable: true, get: function () { return options_2.RESET_VALUE; } });\nconst MemoryOptionToMB = {\n    \"128MiB\": 128,\n    \"256MiB\": 256,\n    \"512MiB\": 512,\n    \"1GiB\": 1024,\n    \"2GiB\": 2048,\n    \"4GiB\": 4096,\n    \"8GiB\": 8192,\n    \"16GiB\": 16384,\n    \"32GiB\": 32768,\n};\nlet globalOptions;\n/**\n * Sets default options for all functions written using the v2 SDK.\n * @param options Options to set as default\n */\nfunction setGlobalOptions(options) {\n    if (globalOptions) {\n        logger.warn(\"Calling setGlobalOptions twice leads to undefined behavior\");\n    }\n    globalOptions = options;\n}\nexports.setGlobalOptions = setGlobalOptions;\n/**\n * Get the currently set default options.\n * Used only for trigger generation.\n * @internal\n */\nfunction getGlobalOptions() {\n    return globalOptions || {};\n}\nexports.getGlobalOptions = getGlobalOptions;\n/**\n * Apply GlobalOptions to trigger definitions.\n * @internal\n */\nfunction optionsToTriggerAnnotations(opts) {\n    const annotation = {};\n    (0, encoding_1.copyIfPresent)(annotation, opts, \"concurrency\", \"minInstances\", \"maxInstances\", \"ingressSettings\", \"labels\", \"vpcConnector\", \"vpcConnectorEgressSettings\", \"secrets\");\n    (0, encoding_1.convertIfPresent)(annotation, opts, \"availableMemoryMb\", \"memory\", (mem) => {\n        return MemoryOptionToMB[mem];\n    });\n    (0, encoding_1.convertIfPresent)(annotation, opts, \"regions\", \"region\", (region) => {\n        if (typeof region === \"string\") {\n            return [region];\n        }\n        return region;\n    });\n    (0, encoding_1.convertIfPresent)(annotation, opts, \"serviceAccountEmail\", \"serviceAccount\", encoding_1.serviceAccountFromShorthand);\n    (0, encoding_1.convertIfPresent)(annotation, opts, \"timeout\", \"timeoutSeconds\", encoding_1.durationFromSeconds);\n    (0, encoding_1.convertIfPresent)(annotation, opts, \"failurePolicy\", \"retry\", (retry) => {\n        return retry ? { retry: true } : null;\n    });\n    return annotation;\n}\nexports.optionsToTriggerAnnotations = optionsToTriggerAnnotations;\n/**\n * Apply GlobalOptions to endpoint manifest.\n * @internal\n */\nfunction optionsToEndpoint(opts) {\n    const endpoint = {};\n    (0, encoding_1.copyIfPresent)(endpoint, opts, \"omit\", \"concurrency\", \"minInstances\", \"maxInstances\", \"ingressSettings\", \"labels\", \"timeoutSeconds\", \"cpu\");\n    (0, encoding_1.convertIfPresent)(endpoint, opts, \"serviceAccountEmail\", \"serviceAccount\");\n    if (opts.vpcConnector !== undefined) {\n        if (opts.vpcConnector === null || opts.vpcConnector instanceof options_1.ResetValue) {\n            endpoint.vpc = options_1.RESET_VALUE;\n        }\n        else {\n            const vpc = { connector: opts.vpcConnector };\n            (0, encoding_1.convertIfPresent)(vpc, opts, \"egressSettings\", \"vpcConnectorEgressSettings\");\n            endpoint.vpc = vpc;\n        }\n    }\n    (0, encoding_1.convertIfPresent)(endpoint, opts, \"availableMemoryMb\", \"memory\", (mem) => {\n        return typeof mem === \"object\" ? mem : MemoryOptionToMB[mem];\n    });\n    (0, encoding_1.convertIfPresent)(endpoint, opts, \"region\", \"region\", (region) => {\n        if (typeof region === \"string\") {\n            return [region];\n        }\n        return region;\n    });\n    (0, encoding_1.convertIfPresent)(endpoint, opts, \"secretEnvironmentVariables\", \"secrets\", (secrets) => secrets.map((secret) => ({ key: secret instanceof types_1.SecretParam ? secret.name : secret })));\n    return endpoint;\n}\nexports.optionsToEndpoint = optionsToEndpoint;\n/**\n * @hidden\n * @alpha\n */\nfunction __getSpec() {\n    return {\n        globalOptions: getGlobalOptions(),\n        params: params_1.declaredParams.map((p) => p.toSpec()),\n    };\n}\nexports.__getSpec = __getSpec;\n", "\"use strict\";\n// The MIT License (MIT)\n//\n// Copyright (c) 2021 Firebase\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.onCall = exports.onRequest = exports.HttpsError = void 0;\n/**\n * Cloud functions to handle HTTPS request or callable RPCs.\n * @packageDocumentation\n */\nconst cors = require(\"cors\");\nconst encoding_1 = require(\"../../common/encoding\");\nconst trace_1 = require(\"../trace\");\nconst debug_1 = require(\"../../common/debug\");\nconst https_1 = require(\"../../common/providers/https\");\nObject.defineProperty(exports, \"HttpsError\", { enumerable: true, get: function () { return https_1.HttpsError; } });\nconst manifest_1 = require(\"../../runtime/manifest\");\nconst options = require(\"../options\");\nfunction onRequest(optsOrHandler, handler) {\n    let opts;\n    if (arguments.length === 1) {\n        opts = {};\n        handler = optsOrHandler;\n    }\n    else {\n        opts = optsOrHandler;\n    }\n    if ((0, debug_1.isDebugFeatureEnabled)(\"enableCors\") || \"cors\" in opts) {\n        let origin = opts.cors;\n        if ((0, debug_1.isDebugFeatureEnabled)(\"enableCors\")) {\n            // Respect `cors: false` to turn off cors even if debug feature is enabled.\n            origin = opts.cors === false ? false : true;\n        }\n        const userProvidedHandler = handler;\n        handler = (req, res) => {\n            return new Promise((resolve) => {\n                res.on(\"finish\", resolve);\n                cors({ origin })(req, res, () => {\n                    resolve(userProvidedHandler(req, res));\n                });\n            });\n        };\n    }\n    handler = (0, trace_1.wrapTraceContext)(handler);\n    Object.defineProperty(handler, \"__trigger\", {\n        get: () => {\n            const baseOpts = options.optionsToTriggerAnnotations(options.getGlobalOptions());\n            // global options calls region a scalar and https allows it to be an array,\n            // but optionsToTriggerAnnotations handles both cases.\n            const specificOpts = options.optionsToTriggerAnnotations(opts);\n            const trigger = {\n                platform: \"gcfv2\",\n                ...baseOpts,\n                ...specificOpts,\n                labels: {\n                    ...baseOpts === null || baseOpts === void 0 ? void 0 : baseOpts.labels,\n                    ...specificOpts === null || specificOpts === void 0 ? void 0 : specificOpts.labels,\n                },\n                httpsTrigger: {\n                    allowInsecure: false,\n                },\n            };\n            (0, encoding_1.convertIfPresent)(trigger.httpsTrigger, opts, \"invoker\", \"invoker\", encoding_1.convertInvoker);\n            return trigger;\n        },\n    });\n    const baseOpts = options.optionsToEndpoint(options.getGlobalOptions());\n    // global options calls region a scalar and https allows it to be an array,\n    // but optionsToTriggerAnnotations handles both cases.\n    const specificOpts = options.optionsToEndpoint(opts);\n    const endpoint = {\n        ...(0, manifest_1.initV2Endpoint)(options.getGlobalOptions(), opts),\n        platform: \"gcfv2\",\n        ...baseOpts,\n        ...specificOpts,\n        labels: {\n            ...baseOpts === null || baseOpts === void 0 ? void 0 : baseOpts.labels,\n            ...specificOpts === null || specificOpts === void 0 ? void 0 : specificOpts.labels,\n        },\n        httpsTrigger: {},\n    };\n    (0, encoding_1.convertIfPresent)(endpoint.httpsTrigger, opts, \"invoker\", \"invoker\", encoding_1.convertInvoker);\n    handler.__endpoint = endpoint;\n    return handler;\n}\nexports.onRequest = onRequest;\nfunction onCall(optsOrHandler, handler) {\n    var _a;\n    let opts;\n    if (arguments.length === 1) {\n        opts = {};\n        handler = optsOrHandler;\n    }\n    else {\n        opts = optsOrHandler;\n    }\n    const origin = (0, debug_1.isDebugFeatureEnabled)(\"enableCors\") ? true : \"cors\" in opts ? opts.cors : true;\n    // onCallHandler sniffs the function length to determine which API to present.\n    // fix the length to prevent api versions from being mismatched.\n    const fixedLen = (req) => handler(req);\n    const func = (0, https_1.onCallHandler)({\n        cors: { origin, methods: \"POST\" },\n        enforceAppCheck: (_a = opts.enforceAppCheck) !== null && _a !== void 0 ? _a : options.getGlobalOptions().enforceAppCheck,\n        consumeAppCheckToken: opts.consumeAppCheckToken,\n    }, fixedLen);\n    Object.defineProperty(func, \"__trigger\", {\n        get: () => {\n            const baseOpts = options.optionsToTriggerAnnotations(options.getGlobalOptions());\n            // global options calls region a scalar and https allows it to be an array,\n            // but optionsToTriggerAnnotations handles both cases.\n            const specificOpts = options.optionsToTriggerAnnotations(opts);\n            return {\n                platform: \"gcfv2\",\n                ...baseOpts,\n                ...specificOpts,\n                labels: {\n                    ...baseOpts === null || baseOpts === void 0 ? void 0 : baseOpts.labels,\n                    ...specificOpts === null || specificOpts === void 0 ? void 0 : specificOpts.labels,\n                    \"deployment-callable\": \"true\",\n                },\n                httpsTrigger: {\n                    allowInsecure: false,\n                },\n            };\n        },\n    });\n    const baseOpts = options.optionsToEndpoint(options.getGlobalOptions());\n    // global options calls region a scalar and https allows it to be an array,\n    // but optionsToEndpoint handles both cases.\n    const specificOpts = options.optionsToEndpoint(opts);\n    func.__endpoint = {\n        ...(0, manifest_1.initV2Endpoint)(options.getGlobalOptions(), opts),\n        platform: \"gcfv2\",\n        ...baseOpts,\n        ...specificOpts,\n        labels: {\n            ...baseOpts === null || baseOpts === void 0 ? void 0 : baseOpts.labels,\n            ...specificOpts === null || specificOpts === void 0 ? void 0 : specificOpts.labels,\n        },\n        callableTrigger: {},\n    };\n    func.run = handler;\n    return func;\n}\nexports.onCall = onCall;\n"],
  "mappings": "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",
  "names": ["require_trace", "require_app_check", "app", "require_app", "traverse", "require_options", "require_https", "baseOpts", "specificOpts"]
}
